
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../../images/isecl-logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.3">
    
    
      
        <title>Deployment - Intel速 SecL-DC</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e35208c4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Helvetica:300,400,400i,700%7CFira+Code&display=fallback">
        <style>:root{--md-text-font-family:"Helvetica";--md-code-font-family:"Fira Code"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="amber">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deployment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Intel速 SecL-DC" class="md-header__button md-logo" aria-label="Intel速 SecL-DC" data-md-component="logo">
      
  <img src="../../../images/isecl-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Intel速 SecL-DC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deployment
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="amber" type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="" type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/stepin105361/siteisecl/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    intel-secl
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/1Hardware%20%26%20OS%20Requirements/" class="md-tabs__link md-tabs__link--active">
        Quick Start Guide
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/01/" class="md-tabs__link">
        Product Guide
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../supplementary-guides/Common%20Cluster%20Deployment%20Guide/1Pre-requisites/" class="md-tabs__link">
        Supplementary Guide
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Intel速 SecL-DC" class="md-nav__button md-logo" aria-label="Intel速 SecL-DC" data-md-component="logo">
      
  <img src="../../../images/isecl-logo.png" alt="logo">

    </a>
    Intel速 SecL-DC
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/stepin105361/siteisecl/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    intel-secl
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Home
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Intel速 Security Libraries for Data Center (Intel速 SecL-DC)
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Quick Start Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Quick Start Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Quick Start Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      <label class="md-nav__link" for="__nav_2_1">
        Foundational & Workload Security - Containerization
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Foundational & Workload Security - Containerization" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Foundational & Workload Security - Containerization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/1Hardware%20%26%20OS%20Requirements/" class="md-nav__link">
        Hardware & OS Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/2Network%20Requirements/" class="md-nav__link">
        Network Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/3Rpms%20%26%20Debs%20Requirement/" class="md-nav__link">
        Rpms & Debs Requirement
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/4Deployment%20Model/" class="md-nav__link">
        Deployment Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/5Build/" class="md-nav__link">
        Build
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/6Deployment/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/7Default%20Service%20and%20Agent%20Mount%20Paths/" class="md-nav__link">
        Default Service and Agent Mount Paths
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/8Default%20Service%20Ports/" class="md-nav__link">
        Default Service Ports
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/9Usecase%20Workflows%20API%20Collections/" class="md-nav__link">
        Usecase Workflows API Collections
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security%20-%20Containerization/10Appendix/" class="md-nav__link">
        Appendix
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      <label class="md-nav__link" for="__nav_2_2">
        Foundational and Workload Security
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Foundational and Workload Security" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Foundational and Workload Security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security/1Hardware%20%26%20OS%20Requirements/" class="md-nav__link">
        Hardware & OS Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security/2Deployment%20Model/" class="md-nav__link">
        Deployment Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security/3Build%20Services%20and%20packages/" class="md-nav__link">
        Build Services and packages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security/4Deployment/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security/5Usecase%20Workflows%20API%20Collections/" class="md-nav__link">
        Usecase Workflows API Collections
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Foundational%20%26%20Workload%20Security/6Appendix/" class="md-nav__link">
        Appendix
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" checked>
      
      <label class="md-nav__link" for="__nav_2_3">
        SGX Infrastructure - Containerization
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="SGX Infrastructure - Containerization" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          SGX Infrastructure - Containerization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../1Hardware%20%26%20OS%20Requirements/" class="md-nav__link">
        Hardware & OS Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2Network%20Requirements/" class="md-nav__link">
        Network Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../3RHEL%20RPMs%20Requirements/" class="md-nav__link">
        RHEL RPMs Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../4Deployment%20Model/" class="md-nav__link">
        Deployment Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../5Build/" class="md-nav__link">
        Build
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Deployment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Deployment
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    Pre-requisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy" class="md-nav__link">
    Deploy
  </a>
  
    <nav class="md-nav" aria-label="Deploy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-node" class="md-nav__link">
    Single-Node
  </a>
  
    <nav class="md-nav" aria-label="Single-Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-requisites_1" class="md-nav__link">
    Pre-requisites
  </a>
  
    <nav class="md-nav" aria-label="Pre-requisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manifests" class="md-nav__link">
    Manifests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-steps" class="md-nav__link">
    Deploy steps
  </a>
  
    <nav class="md-nav" aria-label="Deploy steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-env-file" class="md-nav__link">
    Update .env file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-scripts-on-k8s-control-plane" class="md-nav__link">
    Run scripts on K8s control-plane
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-node" class="md-nav__link">
    Multi-Node
  </a>
  
    <nav class="md-nav" aria-label="Multi-Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-requisites_2" class="md-nav__link">
    Pre-requisites
  </a>
  
    <nav class="md-nav" aria-label="Pre-requisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup_1" class="md-nav__link">
    Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manifests_1" class="md-nav__link">
    Manifests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-steps_1" class="md-nav__link">
    Deploy steps
  </a>
  
    <nav class="md-nav" aria-label="Deploy steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-env-file_1" class="md-nav__link">
    Update .env file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-scripts-on-k8s-control-plane_1" class="md-nav__link">
    Run scripts on K8s control-plane
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../7Default%20Service%20and%20Agent%20Mount%20Paths/" class="md-nav__link">
        Default Service and Agent Mount Paths
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../8Default%20Service%20Ports/" class="md-nav__link">
        Default Service Ports
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../9Usecase%20Workflows%20API%20Collections/" class="md-nav__link">
        Usecase Workflows API Collections
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../10Appendix/" class="md-nav__link">
        Appendix
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" >
      
      <label class="md-nav__link" for="__nav_2_4">
        SGX Infrastructure - RHEL
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="SGX Infrastructure - RHEL" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          SGX Infrastructure - RHEL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/1Hardware%20%26%20OS%20Requirements/" class="md-nav__link">
        Hardware & OS Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/2Network%20Requirements/" class="md-nav__link">
        Network Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/3RHEL%20Package%20Requirements/" class="md-nav__link">
        RHEL Package Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/4Deployment%20Model/" class="md-nav__link">
        Deployment Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/5System%20Tools%20and%20Utilities/" class="md-nav__link">
        System Tools and Utilities
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/6Build%20Services%2C%20Libraries%20and%20Install%20packages/" class="md-nav__link">
        Build Services, Libraries and Install packages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/7Deployment%20%26%20Usecase%20Workflow%20Tools%20Installation/" class="md-nav__link">
        Deployment & Usecase Workflow Tools Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/8Deployment/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/9Usecase%20Workflows%20with%20Postman%20API%20Collections/" class="md-nav__link">
        Usecase Workflows with Postman API Collections
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/10System%20User%20Configuration/" class="md-nav__link">
        System User Configuration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20RHEL/11Appendix/" class="md-nav__link">
        Appendix
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      <label class="md-nav__link" for="__nav_2_5">
        SGX Infrastructure - Ubuntu
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="SGX Infrastructure - Ubuntu" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          SGX Infrastructure - Ubuntu
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/1Hardware%20%26%20OS%20Requirements/" class="md-nav__link">
        Hardware & OS Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/2Network%20Requirements/" class="md-nav__link">
        Network Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/3Ubuntu%20Package%20Requirements/" class="md-nav__link">
        Ubuntu Package Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/4Deployment%20Model/" class="md-nav__link">
        Deployment Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/5Ubuntu%20System%20Tools%20and%20Utilities/" class="md-nav__link">
        Ubuntu System Tools and Utilities
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/6Build%20Services%2C%20Libraries%20and%20Install%20packages/" class="md-nav__link">
        Build Services, Libraries and Install packages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/7Deployment%20%26%20Usecase%20Workflow%20Tools%20Installation/" class="md-nav__link">
        Deployment & Usecase Workflow Tools Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/8Deployment/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/9Usecase%20Workflows%20with%20Postman%20API%20Collection/" class="md-nav__link">
        Usecase Workflows with Postman API Collections
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/10System%20User%20Configuration/" class="md-nav__link">
        System User Configuration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SGX%20Infrastructure%20-%20Ubuntu/11Appendix/" class="md-nav__link">
        Appendix
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Product Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Product Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Product Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      <label class="md-nav__link" for="__nav_3_1">
        Foundational and Workload Security
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Foundational and Workload Security" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Foundational and Workload Security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/01/" class="md-nav__link">
        Product Guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/2Intel%C2%AE%20Security%20Libraries%20Components/" class="md-nav__link">
        Intel速 Security Libraries Components
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/25Intel%C2%AE%20Security%20Libraries%20Container%20Deployment/" class="md-nav__link">
        Intel速 Security Libraries Container Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/26Authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/27Connection%20Strings/" class="md-nav__link">
        Connection Strings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/28Platform%20Integrity%20Attestation/" class="md-nav__link">
        Platform Integrity Attestation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/29Workload%20Confidentiality/" class="md-nav__link">
        Workload Confidentiality
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/30Trusted%20Virtual%20Kubernetes%20Worker%20Nodes/" class="md-nav__link">
        Trusted Virtual Kubernetes Worker Nodes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/31Flavor%20Management/" class="md-nav__link">
        Flavor Management
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/32Scalability%20and%20Sizing/" class="md-nav__link">
        Scalability and Sizing
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_12" type="checkbox" id="__nav_3_1_12" >
      
      <label class="md-nav__link" for="__nav_3_1_12">
        Intel Security Libraries Configuration Settings
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Intel Security Libraries Configuration Settings" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_12">
          <span class="md-nav__icon md-icon"></span>
          Intel Security Libraries Configuration Settings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/33Intel%20Security%20Libraries%20Configuration%20Settings1/" class="md-nav__link">
        Verification Service
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/33Intel%20Security%20Libraries%20Configuration%20Settings2/" class="md-nav__link">
        Trust Agent
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/33Intel%20Security%20Libraries%20Configuration%20Settings3/" class="md-nav__link">
        Integration Hub
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/33Intel%20Security%20Libraries%20Configuration%20Settings4/" class="md-nav__link">
        Certificate Management Service
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/33Intel%20Security%20Libraries%20Configuration%20Settings5/" class="md-nav__link">
        Authentication and Authorization Service
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/33Intel%20Security%20Libraries%20Configuration%20Settings6/" class="md-nav__link">
        Workload Service
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/33Intel%20Security%20Libraries%20Configuration%20Settings7/" class="md-nav__link">
        Key Broker Service
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/33Intel%20Security%20Libraries%20Configuration%20Settings8/" class="md-nav__link">
        Workload Agent
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/33Intel%20Security%20Libraries%20Configuration%20Settings9/" class="md-nav__link">
        Workload Policy Manager
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/34Certificate%20and%20Key%20Management/" class="md-nav__link">
        Certificate and Key Management
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/35Upgrades/" class="md-nav__link">
        Upgrades
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/Foundational%20%26%20Workload%20Security/36Appendix/" class="md-nav__link">
        Appendix
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        SGX Infrastructure
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="SGX Infrastructure" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          SGX Infrastructure
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/01/" class="md-nav__link">
        Product Guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/1Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/2SGX%20Attestation%20Infrastructure%20and%20SKC%20Components/" class="md-nav__link">
        SGX Attestation Infrastructure and SKC Components
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/3Intel%C2%AE%20Security%20Libraries%20Installation/" class="md-nav__link">
        Intel速 Security Libraries Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/4Authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/5SGX%20Features%20Provisioning/" class="md-nav__link">
        SGX Features Provisioning
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/6Setup%20Task%20Flows%20for%20K8s%20Deployments/" class="md-nav__link">
        Setup Task Flows for K8s Deployments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/7Configuration%20Update%20Flows%20for%20K8s%20Deployments/" class="md-nav__link">
        Configuration Update Flows for K8s Deployments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/8Intel%20Security%20Libraries%20Configuration%20Settings/" class="md-nav__link">
        Intel Security Libraries Configuration Settings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/9Uninstallation/" class="md-nav__link">
        Uninstallation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/10Binary%20Upgrades/" class="md-nav__link">
        Binary Upgrades
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/11Container%20Upgrades/" class="md-nav__link">
        Container Upgrades
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/12Appendix/" class="md-nav__link">
        Appendix
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/13KBS%20key-transfer%20flow%20validation/" class="md-nav__link">
        KBS key-transfer flow validation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/14Note%20on%20Key%20Transfer%20Policy/" class="md-nav__link">
        Note on Key Transfer Policy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guides/SGX%20Infrastructure/15Note%20on%20SKC%20Library%20Deployment/" class="md-nav__link">
        Note on SKC Library Deployment
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Supplementary Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Supplementary Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Supplementary Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      <label class="md-nav__link" for="__nav_4_1">
        Common Cluster Deployment
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Common Cluster Deployment" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Common Cluster Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../supplementary-guides/Common%20Cluster%20Deployment%20Guide/1Pre-requisites/" class="md-nav__link">
        Common Cluster Deployment Guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../supplementary-guides/Common%20Cluster%20Deployment%20Guide/2Deployment%20Architecture/" class="md-nav__link">
        Deployment Architecture
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../supplementary-guides/Common%20Cluster%20Deployment%20Guide/3Deployment%20Steps/" class="md-nav__link">
        Deployment Steps
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../supplementary-guides/Common%20Cluster%20Deployment%20Guide/4Workload%20POD%20Launch%20Validation/" class="md-nav__link">
        Workload POD Launch Validation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    Pre-requisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy" class="md-nav__link">
    Deploy
  </a>
  
    <nav class="md-nav" aria-label="Deploy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-node" class="md-nav__link">
    Single-Node
  </a>
  
    <nav class="md-nav" aria-label="Single-Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-requisites_1" class="md-nav__link">
    Pre-requisites
  </a>
  
    <nav class="md-nav" aria-label="Pre-requisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manifests" class="md-nav__link">
    Manifests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-steps" class="md-nav__link">
    Deploy steps
  </a>
  
    <nav class="md-nav" aria-label="Deploy steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-env-file" class="md-nav__link">
    Update .env file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-scripts-on-k8s-control-plane" class="md-nav__link">
    Run scripts on K8s control-plane
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-node" class="md-nav__link">
    Multi-Node
  </a>
  
    <nav class="md-nav" aria-label="Multi-Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-requisites_2" class="md-nav__link">
    Pre-requisites
  </a>
  
    <nav class="md-nav" aria-label="Pre-requisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup_1" class="md-nav__link">
    Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manifests_1" class="md-nav__link">
    Manifests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-steps_1" class="md-nav__link">
    Deploy steps
  </a>
  
    <nav class="md-nav" aria-label="Deploy steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-env-file_1" class="md-nav__link">
    Update .env file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-scripts-on-k8s-control-plane_1" class="md-nav__link">
    Run scripts on K8s control-plane
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/stepin105361/siteisecl/edit/master/docs/quick-start-guides/SGX Infrastructure - Containerization/6Deployment.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="deployment">Deployment</h1>
<h2 id="pre-requisites">Pre-requisites</h2>
<ul>
<li>Install <code>openssl</code> on K8s control-plane</li>
</ul>
<details class="note" open="open"><summary>Note</summary><p>For Ubuntu OS, comment <code>RANDFILE = $ENV::HOME/.rnd</code> line in /etc/ssl/openssl.cnf</p>
</details>
<ul>
<li>Ensure a docker registry is running locally or remotely. </li>
</ul>
<details class="note" open="open"><summary>Note</summary><p>For single node <code>microk8s</code> deployment, a registry can be brought up by using microk8s add-ons. More details present in Microk8s documentation. This is not mandatory, if a remote registry already exists, the same can be  used as well for single-node</p>
</details>
<details class="note" open="open"><summary>Note</summary><p>For multi-node <code>kubeadm</code> deployment, a docker registry needs to be setup by the user</p>
</details>
<ul>
<li>Push all container images to docker registry. Example below</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Without TLS enabled</span>
skopeo copy oci-archive:&lt;oci-image-tar-name&gt; docker://&lt;registry-ip/hostname&gt;:&lt;registry-port&gt;/&lt;image-name&gt;:&lt;image-tag&gt; --dest-tls-verify<span class="o">=</span><span class="nb">false</span>

<span class="c1"># With TLS enabled</span>
skopeo copy oci-archive:&lt;oci-image-tar-name&gt; docker://&lt;registry-ip/hostname&gt;:&lt;registry-port&gt;/image-name&gt;:&lt;image-tag&gt;
</code></pre></div>
<details class="note" open="open"><summary>Note</summary><p>In case of microk8s deployment, when docker registry is enabled locally, the OCI container images need to be copied to the node where registry is enabled and then the above example command can be run. The same would not be required when registry is remotely installed</p>
</details>
<ul>
<li>
<p>On each worker node with SGX enabled and registered to K8s control-plane, the following pre-req needs to be done</p>
</li>
<li>
<p><code>RHEL 8.2</code> enabled K8s worker node with SGX:</p>
<ul>
<li>Pre requisite scripts will be available under <code>k8s/platform-dependencies/</code> on build machine</li>
<li>Copy the platform-dependencies script to SGX enabled worker nodes on K8s</li>
<li>Execute  <code>./agent_untar.sh</code>  </li>
<li>Execute <code>./agent_container_prereq.sh</code> for deploying all pre-reqs required for agent</li>
</ul>
</li>
<li>
<p><code>Ubuntu 18.04</code> enabled K8s worker node with SGX:</p>
<ul>
<li>Pre requisite scripts will be available under <code>k8s/platform-dependencies/</code> on build machine</li>
<li>Copy the platform-dependencies script to SGX enabled worker nodes</li>
<li>Execute  <code>./agent_untar.sh</code>  </li>
<li>Execute <code>./agent_container_prereq.sh</code> for deploying all pre-reqs required for agent</li>
</ul>
</li>
<li>
<p>Ensure a backend KMIP-2.0 compliant server like pykmip is up and running.</p>
<ul>
<li>Retrieve KMIP server's key and certificates i.e. client_certificate.pem, client_key.pem and root_certificate.pem files from /etc/pykmip (default path) to K8s control-plane node under <code>k8s/manifests/kbs/kmip-secrets/</code> path.</li>
</ul>
</li>
</ul>
<details class="note" open="open"><summary>Note</summary><p>Under <code>k8s/manifests/kbs/</code> , if kmip-secrets folder not available then please create it before copying above key and certs </p>
</details>
<ul>
<li>Ensure that system date and time are in sync across all servers (K8s control-plane node, worker node, nfs server, kmip server)</li>
</ul>
<h2 id="deploy">Deploy</h2>
<h3 id="single-node">Single-Node</h3>
<h4 id="pre-requisites_1">Pre-requisites</h4>
<h5 id="setup">Setup</h5>
<ul>
<li>
<p><code>microk8s</code> being the default supported single node K8s distribution, users would need to install microk8s on a Physical server</p>
</li>
<li>
<p>Copy all manifests and OCI container images as required to K8s control-plane</p>
</li>
<li>
<p>Ensure docker registry is running locally or remotely</p>
</li>
<li>
<p>The K8s cluster admin configure the existing bare metal worker nodes or register fresh bare metal worker nodes with labels. For example, a label like <code>node.type: SGX-ENABLED</code> can be used by the cluster admin to distinguish the baremetal worker node and the same label can be used in ISECL Agent pod configuration to schedule on all worker nodes marked with the label. The same label is being used as default in the K8s manifests. This can be edited in <code>k8s/manifests/sgx_agent/daemonset.yml</code> , <code>k8s/manifests/skc_library/deployment.yml</code>
  <div class="highlight"><pre><span></span><code><span class="c1">#Label node</span>
kubectl label node &lt;node-name&gt; node.type<span class="o">=</span>SGX-ENABLED
</code></pre></div></p>
</li>
<li>
<p>In case of <code>microk8s</code> cluster, the <code>--allow-privileged=true</code> flag needs to be added to the <code>kube-apiserver</code> under <code>/var/snap/microk8s/current/args/kube-apiserver</code> and restart <code>kube-apiserver</code> with <code>systemctl restart snap.microk8s.daemon-apiserver</code> to allow running of privileged containers 
  like <code>SGX-AGENT</code> and <code>SKC-LIBRARY</code></p>
</li>
<li>
<p>Enable external API communication for <code>microk8s</code> to talk to external Intel PCS server</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl get configmap -n kube-system
kubectl edit configmap -n kube-system coredns
<span class="c1">#edit coredns config map and change the name server as:</span>
<span class="s2">&quot;forward . /etc/resolv.conf&quot;</span>
<span class="c1">#Delete coredns pod, it will relaunch</span>
</code></pre></div>
<h5 id="manifests">Manifests</h5>
<ul>
<li>
<p>Update all the K8s manifests with the image names to be pulled from the registry</p>
</li>
<li>
<p>The key field in <code>tolerations</code> and <code>nodeAffinity</code> in case of isecl-scheduler and isecl-controller needs to be updated in the respective manifests under the <code>manifests/k8s-extensions-controller</code>  and <code>manifests/k8s-extensions-scheduler</code> directories to <code>microk8s.io/cluster</code> based on k8s distributions of <code>kubeadm</code> and <code>microk8s</code> respectively</p>
</li>
</ul>
<h4 id="deploy-steps">Deploy steps</h4>
<p>The bootstrap script would facilitate the deployment of all SGX components at a usecase level. Sample one given below.</p>
<h5 id="update-env-file">Update .env file</h5>
<div class="highlight"><pre><span></span><code><span class="c1">#Kubernetes Distribution microk8s or kubeadm</span>
<span class="nv">K8S_DISTRIBUTION</span><span class="o">=</span>microk8s
<span class="nv">K8S_CONTROL_PLANE_IP</span><span class="o">=</span>&lt;K8s control-plane IP&gt;
<span class="nv">K8S_CONTROL_PLANE_HOSTNAME</span><span class="o">=</span>&lt;K8s control-plane Hostname&gt;

<span class="c1"># cms</span>
<span class="nv">CMS_SAN_LIST</span><span class="o">=</span>cms-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;

<span class="c1"># authservice</span>
<span class="nv">AAS_API_CLUSTER_ENDPOINT_URL</span><span class="o">=</span>https://&lt;K8s control-plane IP&gt;&gt;:30444/aas/v1
<span class="nv">AAS_ADMIN_USERNAME</span><span class="o">=</span>admin@aas
<span class="nv">AAS_ADMIN_PASSWORD</span><span class="o">=</span>aasAdminPass
<span class="nv">AAS_DB_USERNAME</span><span class="o">=</span>aasdbuser
<span class="nv">AAS_DB_PASSWORD</span><span class="o">=</span>aasdbpassword
<span class="nv">AAS_SAN_LIST</span><span class="o">=</span>aas-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;

<span class="c1"># SGX Caching Service</span>
<span class="nv">SCS_ADMIN_USERNAME</span><span class="o">=</span>scsuser@scs
<span class="nv">SCS_ADMIN_PASSWORD</span><span class="o">=</span>scspassword
<span class="nv">SCS_DB_USERNAME</span><span class="o">=</span>scsdbuser
<span class="nv">SCS_DB_PASSWORD</span><span class="o">=</span>scsdbpassword
<span class="c1"># To be generated by user via Intel PCS server in case of new users, else the exisiting Provisioning key can be used</span>
<span class="nv">INTEL_PROVISIONING_SERVER_API_KEY</span><span class="o">=</span>&lt;provisioning server key&gt;
<span class="nv">SCS_CERT_SAN_LIST</span><span class="o">=</span>scs-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;

<span class="c1"># SGX host verification service</span>
<span class="nv">SHVS_ADMIN_USERNAME</span><span class="o">=</span>shvsuser@shvs
<span class="nv">SHVS_ADMIN_PASSWORD</span><span class="o">=</span>shvspassword
<span class="nv">SHVS_DB_USERNAME</span><span class="o">=</span>shvsdbuser
<span class="nv">SHVS_DB_PASSWORD</span><span class="o">=</span>shvsdbpassword
<span class="nv">SHVS_CERT_SAN_LIST</span><span class="o">=</span>shvs-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;

<span class="c1"># ihub bootstrap</span>
<span class="nv">IHUB_SERVICE_USERNAME</span><span class="o">=</span>admin@hub
<span class="nv">IHUB_SERVICE_PASSWORD</span><span class="o">=</span>hubAdminPass
<span class="nv">IH_CERT_SAN_LIST</span><span class="o">=</span>ihub-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;
<span class="c1"># For microk8s</span>
<span class="c1"># K8S_API_SERVER_CERT=/var/snap/microk8s/current/certs/server.crt</span>
<span class="nv">K8S_API_SERVER_CERT</span><span class="o">=</span>/var/snap/microk8s/current/certs/server.crt
<span class="nv">IHUB_PUB_KEY_PATH</span><span class="o">=</span>/etc/ihub/ihub_public_key.pem

<span class="c1"># KBS bootstrap credentials</span>
<span class="nv">KBS_SERVICE_USERNAME</span><span class="o">=</span>admin@kbs
<span class="nv">KBS_SERVICE_PASSWORD</span><span class="o">=</span>kbsAdminPass
<span class="c1"># For SKC Virtualization use case set ENDPOINT_URL=https://&lt;K8s control-plane IP&gt;&gt;:30448/v1</span>
<span class="nv">ENDPOINT_URL</span><span class="o">=</span>https://kbs-svc.isecl.svc.cluster.local:9443/v1
<span class="nv">KBS_CERT_SAN_LIST</span><span class="o">=</span>kbs-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;

<span class="nv">KMIP_SERVER_IP</span><span class="o">=</span>&lt;KMIP Server IP&gt;
<span class="nv">KMIP_SERVER_PORT</span><span class="o">=</span>&lt;KMIP Server Port&gt;
<span class="nv">KMIP_HOSTNAME</span><span class="o">=</span>&lt;KMIP IP/Hostname&gt;
<span class="c1">#Provide either FQDN or KMIP SERVER IP for kmip hostname</span>
<span class="c1">#Default port for kmip server is 5696</span>

<span class="c1"># ISecl Scheduler</span>
<span class="c1"># For microk8s</span>
<span class="c1"># K8S_CA_KEY=/var/snap/microk8s/current/certs/ca.key</span>
<span class="c1"># K8S_CA_CERT=/var/snap/microk8s/current/certs/ca.crt</span>
<span class="nv">K8S_CA_KEY</span><span class="o">=</span>/var/snap/microk8s/current/certs/ca.key
<span class="nv">K8S_CA_CERT</span><span class="o">=</span>/var/snap/microk8s/current/certs/ca.crt

<span class="c1">#Skc Library</span>
<span class="c1">#Comment during fresh deploy,Uncomment this and update key id when deploying SKC Library</span>
<span class="c1">#KBS_PUBLIC_CERTIFICATE=&lt;key id&gt;.crt</span>

<span class="nv">SCS_SERVICE_USERNAME</span><span class="o">=</span>scsuser@scs
<span class="nv">SCS_SERVICE_PASSWORD</span><span class="o">=</span>scspassword

<span class="nv">SHVS_SERVICE_USERNAME</span><span class="o">=</span>shvsuser@shvs
<span class="nv">SHVS_SERVICE_PASSWORD</span><span class="o">=</span>shvspassword

<span class="nv">SQVS_SERVICE_USERNAME</span><span class="o">=</span>sqvsuser@sqvs
<span class="nv">SQVS_SERVICE_PASSWORD</span><span class="o">=</span>sqvspassword

<span class="nv">CCC_ADMIN_USERNAME</span><span class="o">=</span>ccc_admin
<span class="nv">CCC_ADMIN_PASSWORD</span><span class="o">=</span>password

<span class="nv">GLOBAL_ADMIN_USERNAME</span><span class="o">=</span>global_admin_user
<span class="nv">GLOBAL_ADMIN_PASSWORD</span><span class="o">=</span>globalAdminPass

<span class="nv">INSTALL_ADMIN_USERNAME</span><span class="o">=</span>superadmin
<span class="nv">INSTALL_ADMIN_PASSWORD</span><span class="o">=</span>superAdminPass
</code></pre></div>
<h5 id="run-scripts-on-k8s-control-plane">Run scripts on K8s control-plane</h5>
<ul>
<li>The bootstrap scripts are sample scripts to allow for a quick start of SKC services and agents. Users are free to modify the script or directly use the K8s manifests as per their deployment model requirements</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">#Pre-reqs.sh</span>
./pre-requisites.sh

<span class="c1">#skc-bootstrap-db-services</span>
<span class="c1">#Reference</span>
<span class="c1">#Usage: ./skc-bootstrap-db-services.sh [-help/up/purge]</span>
<span class="c1">#    -help     print help and exit</span>
<span class="c1">#    up        Bootstrap Database Services for Authservice, SGX Caching Service and SGX Host verification Service</span>
<span class="c1">#    purge     Delete Database Services for Authservice, SGX Caching Service and SGX Host verification Service</span>
./skc-bootstrap-db-services.sh up

<span class="c1">#skc-bootstrap</span>
<span class="c1">#Reference</span>
<span class="c1">#Usage: ./skc-bootstrap.sh [-help/up/down/purge]</span>
<span class="c1">#    -help                                     Print help and exit</span>
<span class="c1">#    up   [all/&lt;agent&gt;/&lt;service&gt;/&lt;usecase&gt;]    Bootstrap SKC K8s environment for specified agent/service/usecase</span>
<span class="c1">#    down [all/&lt;agent&gt;/&lt;service&gt;/&lt;usecase&gt;]    Delete SKC K8s environment for specified agent/service/usecase [will not delete data,config,logs]</span>
<span class="c1">#    purge                                     Delete SKC K8s environment with data,config,logs [only supported for single node deployments]</span>

<span class="c1">#    Available Options for up/down command:</span>
<span class="c1">#        agent      Can be one of sagent,skclib</span>
<span class="c1">#        service    Can be one of cms,authservice,scs,shvs,ihub,sqvs,kbs,isecl-controller,isecl-scheduler</span>
<span class="c1">#        usecase    Can be one of secure-key-caching,sgx-attestation,sgx-orchestration-k8s,sgx-virtualization,csp,enterprise</span>
./skc-bootstrap.sh up &lt;all/usecase of choice&gt;
</code></pre></div>
<ul>
<li>Create and update <code>scheduler-policy.json</code> path</li>
</ul>
<div class="highlight"><pre><span></span><code>mkdir -p /opt/isecl-k8s-extensions
cp manifests/k8s-extensions-scheduler/config/scheduler-policy.json /opt/isecl-k8s-extensions
</code></pre></div>
<ul>
<li>Configure kube-scheduler to establish communication with isecl-scheduler.</li>
</ul>
<div class="highlight"><pre><span></span><code>vi /var/snap/microk8s/current/args/kube-scheduler

<span class="c1">#Add the below line</span>
--policy-config-file<span class="o">=</span>/opt/isecl-k8s-extensions/scheduler-policy.json

<span class="c1">#Restart kubelet</span>
systemctl restart snap.microk8s.daemon-kubelet.service
</code></pre></div>
<h3 id="multi-node">Multi-Node</h3>
<h4 id="pre-requisites_2">Pre-requisites</h4>
<h5 id="setup_1">Setup</h5>
<ul>
<li>
<p><code>kubeadm</code> being the default supported multi-node K8s distribution, users would need to install a kubeadm K8s control-plane node setup</p>
</li>
<li>
<p>Copy all manifests and OCI container images as required to K8s control-plane</p>
</li>
<li>
<p>Ensure images are pushed to registry locally or remotely</p>
</li>
<li>
<p>The K8s cluster admin configure the existing bare metal worker nodes or register fresh bare metal worker nodes with labels. For example, a label like <code>node.type: SGX-ENABLED</code> can be used by the cluster admin to distinguish the baremetal worker node and the same label can be used in ISECL Agent pod configuration to schedule on all worker nodes marked with the label. The same label is being used as default in the K8s manifests. This can be edited in <code>k8s/manifests/sgx_agent/daemonset.yml</code> , <code>k8s/manifests/skc_library/deployment.yml</code>
  <div class="highlight"><pre><span></span><code><span class="c1">#Label node</span>
kubectl label node &lt;node-name&gt; node.type<span class="o">=</span>SGX-ENABLED
</code></pre></div></p>
</li>
<li>
<p><code>NFS</code> storage class is used in kubernetes environment for data persistence and supported in SKC. User needs to setup NFS server and create directory structure along with granting permission for a given user id. From security point of view, its been recommended to create a separate user id and grant the permission for all isecl directories for this user id. Below are some samples for reference</p>
</li>
<li>
<p>Snapshot showing directory structure for which user needs to create on NFS volumes manually or using custom scripts.</p>
</li>
</ul>
<p><img alt="NFS Directory Structure SKC Usecase" src="../images/nfs_skc_directory_structure.JPG" /></p>
<ul>
<li>Snapshot showing ownership and permissions for directories for which user needs to manually grant the ownership.</li>
</ul>
<p><img alt="NFS Directory Permissions SKC Usecase" src="../images/nfs_skc_permissions_dir.JPG" /></p>
<ul>
<li>Snapshot for configuring PV and PVC , user need to provide the NFS server IP or hostname and paths for each of the service directories. Sample manifest for creating <code>config-pv</code> for cms service</li>
</ul>
<div class="highlight"><pre><span></span><code>---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: cms-config-pv
spec:
  capacity:
    storage: 128Mi
  volumeMode: Filesystem
  accessModes:
    - ReadWriteMany
  persistentVolumeReclaimPolicy: Retain
  storageClassName: nfs
  nfs:
    path: /&lt;NFS-vol-base-path&gt;/isecl/cms/config
    server: &lt;NFS Server IP/Hostname&gt;
</code></pre></div>
<p>Sample manifest for creating config-pvc for cms service</p>
<div class="highlight"><pre><span></span><code>---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: cms-config-pvc
  namespace: isecl
spec:
  storageClassName: nfs
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 128Mi
</code></pre></div>
<details class="note" open="open"><summary>Note</summary><p>The user id specified in security context in <code>deployment.yml</code> for a given service and owner of the service related directories in NFS must be same</p>
</details>
<h5 id="manifests_1">Manifests</h5>
<ul>
<li>
<p>Update all the K8s manifests with the image names to be pulled from the registry</p>
</li>
<li>
<p>The key field in <code>tolerations</code> and <code>nodeAffinity</code> in case of isecl-scheduler and isecl-controller needs to be updated in the respective manifests under the <code>manifests/k8s-extensions-controller</code>  and <code>manifests/k8s-extensions-scheduler</code> directories to <code>node-role.kubernetes.io/master</code></p>
</li>
<li>All NFS PV yaml files needs to be updated with the  <code>path: /&lt;NFS-vol-path&gt;</code>  and <code>server: &lt;NFS Server IP/Hostname&gt;</code> under each service manifest file for <code>config</code>, <code>logs</code> , <code>db-data</code></li>
</ul>
<h4 id="deploy-steps_1">Deploy steps</h4>
<h5 id="update-env-file_1">Update .env file</h5>
<div class="highlight"><pre><span></span><code><span class="c1">#Kubernetes Distribution microk8s or kubeadm</span>
<span class="nv">K8S_DISTRIBUTION</span><span class="o">=</span>kubeadm
<span class="nv">K8S_CONTROL_PLANE_IP</span><span class="o">=</span>&lt;K8s control-plane IP&gt;
<span class="nv">K8S_CONTROL_PLANE_HOSTNAME</span><span class="o">=</span>&lt;K8s control-plane Hostname&gt;

<span class="c1"># cms</span>
<span class="nv">CMS_SAN_LIST</span><span class="o">=</span>cms-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;

<span class="c1"># authservice</span>
<span class="nv">AAS_API_CLUSTER_ENDPOINT_URL</span><span class="o">=</span>https://&lt;K8s control-plane IP&gt;:30444/aas/v1
<span class="nv">AAS_ADMIN_USERNAME</span><span class="o">=</span>admin@aas
<span class="nv">AAS_ADMIN_PASSWORD</span><span class="o">=</span>aasAdminPass
<span class="nv">AAS_DB_USERNAME</span><span class="o">=</span>aasdbuser
<span class="nv">AAS_DB_PASSWORD</span><span class="o">=</span>aasdbpassword
<span class="nv">AAS_SAN_LIST</span><span class="o">=</span>aas-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;

<span class="c1"># SGX Caching Service</span>
<span class="nv">SCS_ADMIN_USERNAME</span><span class="o">=</span>scsuser@scs
<span class="nv">SCS_ADMIN_PASSWORD</span><span class="o">=</span>scspassword
<span class="nv">SCS_DB_USERNAME</span><span class="o">=</span>scsdbuser
<span class="nv">SCS_DB_PASSWORD</span><span class="o">=</span>scsdbpassword
<span class="c1"># To be generated by user via Intel PCS server in case of new users, else the exisiting Provisioning key can be used</span>
<span class="nv">INTEL_PROVISIONING_SERVER_API_KEY</span><span class="o">=</span>&lt;provisioning server key&gt;
<span class="nv">SCS_CERT_SAN_LIST</span><span class="o">=</span>scs-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;

<span class="c1"># SGX host verification service</span>
<span class="nv">SHVS_ADMIN_USERNAME</span><span class="o">=</span>shvsuser@shvs
<span class="nv">SHVS_ADMIN_PASSWORD</span><span class="o">=</span>shvspassword
<span class="nv">SHVS_DB_USERNAME</span><span class="o">=</span>shvsdbuser
<span class="nv">SHVS_DB_PASSWORD</span><span class="o">=</span>shvsdbpassword
<span class="nv">SHVS_CERT_SAN_LIST</span><span class="o">=</span>shvs-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;

<span class="c1"># ihub bootstrap</span>
<span class="nv">IHUB_SERVICE_USERNAME</span><span class="o">=</span>admin@hub
<span class="nv">IHUB_SERVICE_PASSWORD</span><span class="o">=</span>hubAdminPass
<span class="nv">IH_CERT_SAN_LIST</span><span class="o">=</span>ihub-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;
<span class="c1"># For Kubeadm</span>
<span class="c1"># K8S_API_SERVER_CERT=/etc/kubernetes/pki/apiserver.crt</span>
<span class="nv">K8S_API_SERVER_CERT</span><span class="o">=</span>/etc/kubernetes/pki/apiserver.crt
<span class="c1"># This is not valid for multinode deployment, should be populated once ihub is deployed successfully</span>
<span class="nv">IHUB_PUB_KEY_PATH</span><span class="o">=</span>&lt;skip this during initial deploy of K8s multi-node&gt;

<span class="c1"># KBS bootstrap credentials</span>
<span class="nv">KBS_SERVICE_USERNAME</span><span class="o">=</span>admin@kbs
<span class="nv">KBS_SERVICE_PASSWORD</span><span class="o">=</span>kbsAdminPass
<span class="c1"># For SKC Virtualization use case set ENDPOINT_URL=https://&lt;K8s control-plane IP&gt;:30448/v1</span>
<span class="nv">ENDPOINT_URL</span><span class="o">=</span>https://kbs-svc.isecl.svc.cluster.local:9443/v1
<span class="nv">KBS_CERT_SAN_LIST</span><span class="o">=</span>kbs-svc.isecl.svc.cluster.local,&lt;K8s control-plane IP&gt;,&lt;K8s control-plane Hostname&gt;

<span class="nv">KMIP_SERVER_IP</span><span class="o">=</span>&lt;KMIP Server IP&gt;
<span class="nv">KMIP_SERVER_PORT</span><span class="o">=</span>&lt;KMIP Server Port&gt;
<span class="nv">KMIP_HOSTNAME</span><span class="o">=</span>&lt;KMIP IP/Hostname&gt;
<span class="c1">#Provide either FQDN or KMIP SERVER IP for kmip hostname</span>
<span class="c1">#Default port for kmip server is 5696</span>


<span class="c1"># ISecl Scheduler</span>
<span class="c1"># For Kubeadm</span>
<span class="c1"># K8S_CA_KEY=/etc/kubernetes/pki/ca.key</span>
<span class="c1"># K8S_CA_CERT=/etc/kubernetes/pki/ca.crt</span>
<span class="nv">K8S_CA_KEY</span><span class="o">=</span>/etc/kubernetes/pki/ca.key
<span class="nv">K8S_CA_CERT</span><span class="o">=</span>/etc/kubernetes/pki/ca.crt

<span class="c1">#Skc Library</span>
<span class="c1">#Comment during fresh deploy,Uncomment this and update key id when deploying SKC Library</span>
<span class="c1">#KBS_PUBLIC_CERTIFICATE=&lt;key id&gt;.crt</span>

<span class="nv">SCS_SERVICE_USERNAME</span><span class="o">=</span>scsuser@scs
<span class="nv">SCS_SERVICE_PASSWORD</span><span class="o">=</span>scspassword

<span class="nv">SHVS_SERVICE_USERNAME</span><span class="o">=</span>shvsuser@shvs
<span class="nv">SHVS_SERVICE_PASSWORD</span><span class="o">=</span>shvspassword

<span class="nv">SQVS_SERVICE_USERNAME</span><span class="o">=</span>sqvsuser@sqvs
<span class="nv">SQVS_SERVICE_PASSWORD</span><span class="o">=</span>sqvspassword

<span class="nv">CCC_ADMIN_USERNAME</span><span class="o">=</span>ccc_admin
<span class="nv">CCC_ADMIN_PASSWORD</span><span class="o">=</span>password

<span class="nv">GLOBAL_ADMIN_USERNAME</span><span class="o">=</span>global_admin_user
<span class="nv">GLOBAL_ADMIN_PASSWORD</span><span class="o">=</span>globalAdminPass

<span class="nv">INSTALL_ADMIN_USERNAME</span><span class="o">=</span>superadmin
<span class="nv">INSTALL_ADMIN_PASSWORD</span><span class="o">=</span>superAdminPass
</code></pre></div>
<h5 id="run-scripts-on-k8s-control-plane_1">Run scripts on K8s control-plane</h5>
<ul>
<li>The bootstrap scripts are sample scripts to allow for a quick start of SKC services and agents. Users are free to modify the script or directly use the K8s manifests as per their deployment model requirements</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">#If using sample script provided for creating nfs directories</span>
<span class="c1">#Copy the script to the base path of the NFS location configured</span>
chmod +x create-skc-dirs.nfs.sh
./create-skc-dirs.nfs.sh

<span class="c1">#Pre-reqs.sh</span>
./pre-requisites.sh

<span class="c1">#skc-bootstrap-db-services</span>
<span class="c1">#Reference</span>
<span class="c1">#Usage: ./skc-bootstrap-db-services.sh [-help/up/purge]</span>
<span class="c1">#    -help     print help and exit</span>
<span class="c1">#    up        Bootstrap Database Services for Authservice, SGX Caching Service and SGX Host verification Service</span>
<span class="c1">#    purge     Delete Database Services for Authservice, SGX Caching Service and SGX Host verification Service</span>
./skc-bootstrap-db-services.sh up

<span class="c1">#skc-bootstrap</span>
<span class="c1">#Reference</span>
<span class="c1">#Usage: ./skc-bootstrap.sh [-help/up/down/purge]</span>
<span class="c1">#    -help                                     Print help and exit</span>
<span class="c1">#    up   [all/&lt;agent&gt;/&lt;service&gt;/&lt;usecase&gt;]    Bootstrap SKC K8s environment for specified agent/service/usecase</span>
<span class="c1">#    down [all/&lt;agent&gt;/&lt;service&gt;/&lt;usecase&gt;]    Delete SKC K8s environment for specified agent/service/usecase [will not delete data,config,logs]</span>
<span class="c1">#    purge                                     Delete SKC K8s environment with data,config,logs [only supported for single node deployments]</span>

<span class="c1">#    Available Options for up/down command:</span>
<span class="c1">#        agent      Can be one of sagent,skclib</span>
<span class="c1">#        service    Can be one of cms,authservice,scs,shvs,ihub,sqvs,kbs,isecl-controller,isecl-scheduler</span>
<span class="c1">#        usecase    Can be one of secure-key-caching,sgx-attestation,sgx-orchestration-k8s,sgx-virtualization,csp,enterprise</span>
./skc-bootstrap.sh up &lt;all/usecase of choice&gt;

<span class="c1">#NOTE: The isecl-scheduler will not be deployed in case of multi-node K8s as there is dependency on the NFS server IHUB public key to be copied from NFS to K8s control-plane to allow the successful installation of isecl-scheduler. Post update of the isecl-k8s-skc.env for IHUB_PUB_KEY_PATH on K8s control-plane, user needs to run the following</span>
./skc-bootstrap.sh up isecl-scheduler
</code></pre></div>
<ul>
<li>Create and update <code>scheduler-policy.json</code> path</li>
</ul>
<div class="highlight"><pre><span></span><code>mkdir -p /opt/isecl-k8s-extensions
cp manifests/k8s-extensions-scheduler/config/scheduler-policy.json /opt/isecl-k8s-extensions
</code></pre></div>
<ul>
<li>Configure kube-scheduler to establish communication with isecl-scheduler. Add <code>scheduler-policy.json</code> under kube-scheduler section, <code>mountPath</code> under container section and <code>hostPath</code> under volumes section in<code>/etc/kubernetes/manifests/kube-scheduler.yaml</code> as mentioned below</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">command</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">kube-scheduler</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">--policy-config-file=/opt/isecl-k8s-extensions/scheduler-policy.json</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">containers</span><span class="p">:</span>
    <span class="nt">volumeMounts</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mountPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/opt/isecl-k8s-extensions/</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">extendedsched</span>
      <span class="nt">readOnly</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">hostPath</span><span class="p">:</span>
      <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/opt/isecl-k8s-extensions/</span>
      <span class="nt">type</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">extendedsched</span>
</code></pre></div>
<details class="note" open="open"><summary>Note</summary><p>Make sure to use proper indentation and don't delete existing <code>mountPath</code> and <code>hostPath</code> sections in <code>kube-scheduler.yaml</code></p>
</details>
<ul>
<li>Restart <code>kubelet</code> which restart all the k8s services including kube-scheduler</li>
</ul>
<div class="highlight"><pre><span></span><code>systemctl restart kubelet
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../5Build/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Build
            </div>
          </div>
        </a>
      
      
        <a href="../7Default%20Service%20and%20Agent%20Mount%20Paths/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Default Service and Agent Mount Paths
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.indexes", "navigation.top", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.4ea5477f.min.js"></script>
      
    
  </body>
</html>